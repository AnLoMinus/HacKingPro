#!/bin/bash

start_dns_changer(){

source /usr/share/kali-whoami/assets/sources/config

if [[ "$ip_changer_status" == "Disable" ]]; then

	#backup and configure nameservers
	if [[ "$dns_changer_status" == "Disable" ]]; then
	   
	   cat /etc/resolv.conf > $BACKUPDIR/resolv.conf.bak
	   cat >"/etc/resolv.conf" <<EOF
# generated by whoami
nameserver 84.200.69.80
nameserver 84.200.70.40
nameserver 91.239.100.100
nameserver 89.233.43.71
nameserver 208.67.222.222
nameserver 208.67.220.220
EOF
	   sed -i 's/dns_changer_status="Disable"/dns_changer_status="Enable"/g' $SRCDIR/sources/config
	   info "Dns changer successfully enabled"
	else
	   warn "Dns changer is already running"
	fi
else
	warn "The Dns changer is not available. (Ip changer enabled)"
fi
}

stop_dns_changer(){

	source /usr/share/kali-whoami/assets/sources/config
	cat $BACKUPDIR/resolv.conf.bak > /etc/resolv.conf && rm -fr $BACKUPDIR/resolv.conf.bak
	sed -i 's/dns_changer_status="Enable"/dns_changer_status="Disable"/g' $SRCDIR/sources/config
	info "Dns changer successfully disabled"

}